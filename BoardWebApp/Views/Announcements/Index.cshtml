@model List<BoardWebApp.Models.Announcement>

<h2>Оголошення</h2>

<div class="container mt-4">
    <h2 class="mb-4">Список оголошень</h2>

    <form method="get" class="row mb-4">
        <div class="col-md-4">
            <select name="category" class="form-select" onchange="this.form.submit()">
                <option value="">-- Всі категорії --</option>
                @foreach (var cat in ViewBag.Categories)
                {
                    var selected = cat == ViewBag.SelectedCategory ? "selected" : "";
                    @:<option value="@cat" @selected>@cat</option>
                }
            </select>
        </div>
        <div class="col-md-4">
            <select name="subcategory" class="form-select" onchange="this.form.submit()">
                <option value="">-- Всі підкатегорії --</option>
                @foreach (var sub in ViewBag.SubCategories)
                {
                    var selected = sub == ViewBag.SelectedSubCategory ? "selected" : "";
                    @:<option value="@sub" @selected>@sub</option>
                }
            </select>
        </div>
        <div class="col-md-4">
            <a href="/Announcements" class="btn btn-sm btn-primary">Скинути фільтри</a>
        </div>
    </form>


    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        @foreach (var announcement in Model)
        {
            <div class="col">
                <div class="card h-100 shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">@announcement.Title</h5>
                        <p class="card-text">@announcement.Description</p>
                        <p class="text-muted">
                            @announcement.Category / @announcement.SubCategory <br />
                            Дата: @announcement.CreatedDate.ToString("dd.MM.yyyy") <br />
                            Статус: <strong>@announcement.Status</strong>
                        </p>
                    </div>
                    <div class="card-footer d-flex justify-content-between">
                        <a href="/Announcements/Edit/@announcement.Id" class="btn btn-sm btn-primary">Редагувати</a>
                        <a href="/Announcements/Delete/@announcement.Id" class="btn btn-sm btn-danger">Видалити</a>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
